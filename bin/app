#!/usr/bin/env php
<?php
	if(file_exists("src/startup.php") == true) {
		chdir("src/");
	}

	$startupFile = "startup.php";

	if(file_exists($startupFile) !== true) {
		die("Neither current working directory or its parent is a valid application directory\n");
	}

	require $startupFile;

	\Singleton::set(new \Configuration(STORAGE . "/config/application.jsonc"));

	//\Singleton::set(new \Database\Connection(
	//	\Singleton::getConfiguration()->get("database.host"),
	//	\Singleton::getConfiguration()->get("database.username"),
	//	\Singleton::getConfiguration()->get("database.password"),
	//	\Singleton::getConfiguration()->get("database.name")
	//));

	$iRouter = new \Core\Router(new \Core\Request(), new \Core\Response());

	$iApplication = new \Core\Application($iRouter);

	$iApplication->run();

